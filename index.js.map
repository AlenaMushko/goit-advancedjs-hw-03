{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = import.meta.env.VITE_PIXABAY_API_KEY || '00000';\nconst BASE_URL =\n  import.meta.env.VITE_PIXABAY_BASE_URL || 'https://pixabay.com/api/';\n\nexport async function searchImages(query, page = 1, perPage = 40) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage,\n  };\n\n  try {\n    const { data } = await axios.get(BASE_URL, { params });\n    return data;\n  } catch (error) {\n    throw new Error(`Failed to fetch images: ${error.message}`);\n  }\n}\n","export function renderGallery(images, galleryEl, append = false) {\n  const galleryHTML = images\n    .map(\n      image => `\n    <li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img \n          src=\"${image.webformatURL}\" \n          alt=\"${image.tags}\" \n          loading=\"lazy\"\n          class=\"gallery-image\"\n        />\n        <div class=\"gallery-info\">\n          <p class=\"info-item\">\n            <b>Likes</b> <span class=\"info-item-value\">${image.likes}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b> <span class=\"info-item-value\">${image.views}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b> <span class=\"info-item-value\">${image.comments}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b> <span class=\"info-item-value\">${image.downloads}</span>\n          </p>\n        </div>\n      </a>\n    </li>\n  `\n    )\n    .join('');\n\n  if (append) {\n    galleryEl.insertAdjacentHTML('beforeend', galleryHTML);\n  } else {\n    galleryEl.innerHTML = galleryHTML;\n  }\n}\n\nexport function clearGallery(galleryEl) {\n  galleryEl.innerHTML = '';\n}\n\nexport function showLoader(loaderEl) {\n  loaderEl.classList.remove('is-hidden');\n}\n\nexport function hideLoader(loaderEl) {\n  loaderEl.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-function.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('#loader');\nconst loadMoreContainer = document.querySelector('#load-more-container');\nconst loadMoreButton = document.querySelector('#load-more-button');\n\nlet lightbox = null;\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nlet totalPages = 0;\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const searchQuery = searchForm.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter at least 1 character',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = searchQuery;\n  currentPage = 1;\n  totalHits = 0;\n  totalPages = 0;\n\n  clearGallery(gallery);\n  hideLoadMoreButton();\n\n  showLoader(loader);\n\n  try {\n    const data = await searchImages(searchQuery, currentPage);\n\n    hideLoader(loader);\n\n    if (data.hits && data.hits.length > 0) {\n      totalHits = data.totalHits;\n      totalPages = Math.ceil(totalHits / 40);\n\n      renderGallery(data.hits, gallery);\n\n      if (lightbox) {\n        lightbox.refresh();\n      } else {\n        lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      }\n\n      if (currentPage < totalPages) {\n        showLoadMoreButton();\n      }\n    } else {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    hideLoader(loader);\n    iziToast.error({\n      message: `An error occurred: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n});\n\nfunction showLoadMoreButton() {\n  loadMoreContainer.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreContainer.classList.add('is-hidden');\n}\n\nloadMoreButton.addEventListener('click', async () => {\n  if (!currentQuery) return;\n\n  currentPage += 1;\n  showLoader(loader);\n\n  try {\n    const data = await searchImages(currentQuery, currentPage);\n    hideLoader(loader);\n\n    renderGallery(data.hits, gallery, true);\n\n    if (lightbox) {\n      lightbox.refresh();\n    }\n\n    if (currentPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: 'You have reached the end of the search results',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    hideLoader(loader);\n    iziToast.error({\n      message: `An error occurred: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["API_KEY","BASE_URL","searchImages","query","page","perPage","params","data","axios","error","renderGallery","images","galleryEl","append","galleryHTML","image","clearGallery","showLoader","loaderEl","hideLoader","searchForm","gallery","loader","loadMoreContainer","loadMoreButton","lightbox","currentQuery","currentPage","totalHits","totalPages","e","searchQuery","iziToast","hideLoadMoreButton","SimpleLightbox","showLoadMoreButton"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EACJ,2BAEF,eAAsBC,EAAaC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAChE,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAUC,CAAA,EAGR,GAAA,CACI,KAAA,CAAE,KAAAE,CAAS,EAAA,MAAMC,EAAM,IAAIP,EAAU,CAAE,OAAAK,CAAA,CAAQ,EAC9C,OAAAC,QACAE,EAAO,CACd,MAAM,IAAI,MAAM,2BAA2BA,EAAM,OAAO,EAAE,CAC5D,CACF,CCvBO,SAASC,EAAcC,EAAQC,EAAWC,EAAS,GAAO,CAC/D,MAAMC,EAAcH,EACjB,IACCI,GAAS;AAAA;AAAA,iBAEEA,EAAM,aAAa;AAAA;AAAA,iBAEnBA,EAAM,YAAY;AAAA,iBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDAM8BA,EAAM,KAAK;AAAA;AAAA;AAAA,yDAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,4DAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,6DAGbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,GAMvE,EACA,KAAK,EAAE,EAENF,EACFD,EAAU,mBAAmB,YAAaE,CAAW,EAErDF,EAAU,UAAYE,CAE1B,CAEO,SAASE,EAAaJ,EAAW,CACtCA,EAAU,UAAY,EACxB,CAEO,SAASK,EAAWC,EAAU,CACnCA,EAAS,UAAU,OAAO,WAAW,CACvC,CAEO,SAASC,EAAWD,EAAU,CACnCA,EAAS,UAAU,IAAI,WAAW,CACpC,CCpCA,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAoB,SAAS,cAAc,sBAAsB,EACjEC,EAAiB,SAAS,cAAc,mBAAmB,EAEjE,IAAIC,EAAW,KACXC,EAAe,GACfC,EAAc,EACdC,EAAY,EACZC,EAAa,EAEjBT,EAAW,iBAAiB,SAAU,MAAMU,GAAK,CAC/CA,EAAE,eAAc,EAEhB,MAAMC,EAAcX,EAAW,YAAY,MAAM,KAAI,EAErD,GAAI,CAACW,EAAa,CAChBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oCACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDN,EAAeK,EACfJ,EAAc,EACdC,EAAY,EACZC,EAAa,EAEbb,EAAaK,CAAO,EACpBY,IAEAhB,EAAWK,CAAM,EAEjB,GAAI,CACF,MAAMf,EAAO,MAAML,EAAa6B,EAAaJ,CAAW,EAExDR,EAAWG,CAAM,EAEbf,EAAK,MAAQA,EAAK,KAAK,OAAS,GAClCqB,EAAYrB,EAAK,UACjBsB,EAAa,KAAK,KAAKD,EAAY,EAAE,EAErClB,EAAcH,EAAK,KAAMc,CAAO,EAE5BI,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIS,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACxB,CAAS,EAGCP,EAAcE,GAChBM,KAGFH,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,CAEJ,OAAQvB,EAAO,CACdU,EAAWG,CAAM,EACjBU,EAAS,MAAM,CACb,QAAS,sBAAsBvB,EAAM,OAAO,GAC5C,SAAU,UAChB,CAAK,CACF,CACH,CAAC,EAED,SAAS0B,GAAqB,CAC5BZ,EAAkB,UAAU,OAAO,WAAW,CAChD,CAEA,SAASU,GAAqB,CAC5BV,EAAkB,UAAU,IAAI,WAAW,CAC7C,CAEAC,EAAe,iBAAiB,QAAS,SAAY,CACnD,GAAKE,EAEL,CAAAC,GAAe,EACfV,EAAWK,CAAM,EAEjB,GAAI,CACF,MAAMf,EAAO,MAAML,EAAawB,EAAcC,CAAW,EACzDR,EAAWG,CAAM,EAEjBZ,EAAcH,EAAK,KAAMc,EAAS,EAAI,EAElCI,GACFA,EAAS,QAAO,EAGdE,GAAeE,IACjBI,IACAD,EAAS,KAAK,CACZ,QAAS,iDACT,SAAU,UAClB,CAAO,EAEJ,OAAQvB,EAAO,CACdU,EAAWG,CAAM,EACjBU,EAAS,MAAM,CACb,QAAS,sBAAsBvB,EAAM,OAAO,GAC5C,SAAU,UAChB,CAAK,CACF,EACH,CAAC"}